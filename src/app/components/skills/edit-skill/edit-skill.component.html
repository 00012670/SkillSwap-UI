<div class="container my-5">
  <h3 class="mb-3">Update skill</h3>

  <div class="row">
    <div class="col-5">
      <form [formGroup]="editSkillForm" (ngSubmit)="updateSkill()">

        <div class="mb-3">
          <label for="name" class="form-label">Name</label>
          <input formControlName="name" [ngClass]="{'is-invalid': submited && editSkillForm.get('name')!.errors}"
            type="text" class="form-control" id="name" name="name">
          <div *ngIf="submited && editSkillForm.get('name')!.hasError('required')" class="invalid-feedback">
            *Skill name is required
          </div>
        </div>

        <div class="mb-3">
          <label for="description" class="form-label">Description</label>
          <input formControlName="description"
            [ngClass]="{'is-invalid': submited && editSkillForm.get('description')!.errors}" type="text"
            class="form-control" id="description" name="description">
          <div *ngIf="submited && editSkillForm.get('description')!.hasError('required')" class="invalid-feedback">
            *Description is required
          </div>
        </div>

        <div class="mb-3">
          <label for="category" class="form-label">Category</label>
          <input formControlName="category"
            [ngClass]="{'is-invalid': submited && editSkillForm.get('category')!.errors}" type="text"
            class="form-control" id="category" name="category">
          <div *ngIf="submited && editSkillForm.get('category')!.hasError('required')" class="invalid-feedback">
            *Category is required
          </div>
        </div>

        <div class="mb-3">
          <label for="level" class="form-label">Level</label>
          <select formControlName="level" [ngClass]="{'is-invalid': submited && editSkillForm.get('level')!.errors}"
            class="form-select" id="level" name="level">
            <option *ngFor="let level of levelOptions" [value]="level">{{ getLevel(level) }}</option>
          </select>
        </div>


        <div class="mb-3">
          <label for="prerequisites" class="form-label">Prerequisity</label>
          <input formControlName="prerequisity"
            [ngClass]="{'is-invalid': submited && editSkillForm.get('prerequisity')!.errors}" name="prerequisity"
            type="text" class="form-control" id="prerequisites">
          <div *ngIf="submited && editSkillForm.get('prerequisity')!.hasError('required')" class="invalid-feedback">
            *Prerequisity is required
          </div>
        </div>

        <div class="mt-4"> <button type="submit" class="btn btn-primary" style="margin-right: 10px">Update</button>
          <button type="button" class="btn btn-danger"
            (click)="checkSKillBeforeDeleting(skillDetails.skillId)">Delete</button>
        </div>
        <div class="mt-3"> <a [routerLink]="['/skills', userId]"> Go back</a>
        </div>
      </form>
    </div>

    <!-- Image Section -->
    <div class="col-md-6">
      <div class="md-6">
        <label for="uploadImage" class="form-label">Upload Image</label>
        <input #uploadImageRef type="file" class="form-control" placeholder="Choose file" (change)="onChange($event)"
          id="uploadImage" name="upload">

        <br>
        <label class="image-upload" for="fileupload">
          <img class="img-responsive img-thumbnail popupclass" [src]="imageUrl"></label>
      </div>
      <br>
      <button (click)="uploadImage()" class="btn btn-primary" [disabled]="!isImageChosen">Upload</button> |
      <button *ngIf="skillDetails.skillId" (click)="removeImage()" class="btn btn-danger"
        [disabled]="!isImageUploaded">Remove</button>
    </div>
  </div>
</div>
